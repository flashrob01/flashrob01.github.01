<!DOCTYPE html>

<html>
    <head>
        <title> Buy-Escrow1 </title>
        <link rel="stylesheet" href= "./style.css">
    </head>

    <body>
        <header>

            <img src="./DDRLogo2.png" onClick = "location.href ='./index3.html'" width = 100 height = 90/>

            <img src="N3logo.jpg" img id = "Neo3" onClick = "location.href = 'http:/www.neo.org'" width = 120 height = 50%/>

            <button id = "send" > try </button>  

            <script type = "text/javascript" >
            
                                        let neoline;
                            let neolineN3;

                            function initDapi() {
                                const initCommonDapi = new Promise((resolve, reject) => {
                                    window.addEventListener('NEOLine.NEO.EVENT.READY', () => {
                                        neoline = new NEOLine.Init();
                                        if (neoline) {
                                            resolve(neoline);
                                        } else {
                                            reject('common dAPI method failed to load.');
                                        }
                                    });
                                });
                                const initN3Dapi = new Promise((resolve, reject) => {
                                    window.addEventListener('NEOLine.N3.EVENT.READY', () => {
                                        neolineN3 = new NEOLineN3.Init();
                                        if (neolineN3) {
                                            resolve(neolineN3);
                                        } else {
                                            reject('N3 dAPI method failed to load.');
                                        }
                                    });
                                });
                                initCommonDapi.then(() => {
                                    console.log('The common dAPI method is loaded.');
                                    return initN3Dapi;
                                }).then(() => {
                                    console.log('The N3 dAPI method is loaded.');
                                }).catch((err) => {
                                    console.log(err);
                                })
                            };

                            initDapi();
                                    




            </script>
            

            <script type = "text/javascript" >
                  document.getElementById("send").onclick = function() {
                    
neolineN3.send({
    fromAddress: 'Nad8Y4YAi6WzQS2T773VscBy2dLNZx7yw5',
    toAddress: 'Nad8Y4YAi6WzQS2T773VscBy2dLNZx7yw5',
    asset: 'GAS',
    amount: '1',
    fee: '0.0001',
    broadcastOverride: false
})
.then(result => {
    console.log('Send transaction success!');
    console.log('Transaction ID: ' + result.txid);
    console.log('RPC node URL: ' + result.nodeURL);
})
                  }
                </script>

</header>
</body>
</html>
